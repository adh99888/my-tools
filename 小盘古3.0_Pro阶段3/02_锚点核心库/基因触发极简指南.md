# 基因触发极简指南

## 🎯 核心理念
**平时不用，适时触发，融合使用**  
宁可不用，也不让基因吸收成为生存和进化的阻碍。

## ⚖️ 宪法底线（必须遵守）
1. **≤200行原则**：任何基因模块≤200行代码
2. **协议驱动**：必须通过L2/L3协议申请才能吸收
3. **重新实现**：不复制代码（相似度≤30%），只吸收设计思想
4. **生存第一**：不影响系统稳定，必须有回滚方案
5. **宪法审查**：每次吸收后必须执行宪法审查

## 🔄 触发时机（3种情况）

### 1. 阶段转换时
- **何时触发**：当前阶段完成，准备进入下一阶段前
- **做什么**：查看下一阶段需要的核心能力基因
- **举例**：阶段二→阶段三前，查看"意图识别"基因

### 2. 遇到问题时
- **何时触发**：系统出现明显瓶颈或问题症状时
- **做什么**：查找对应症状的解决方案基因
- **症状-基因对应表**：
  - **API频繁失败** → 查看`熔断器基因.md`
  - **配置管理混乱** → 需要时创建Pydantic配置基因文档
  - **记不住用户习惯** → 需要时创建工作记忆基因文档
  - **意图理解困难** → 需要时创建意图识别基因文档

### 3. 用户明确要求时
- **何时触发**：用户直接要求吸收特定基因
- **做什么**：按用户指示查找和执行

## 📋 极简工作流（3步骤）

### 步骤1：确认需要
- 明确问题：当前遇到什么具体问题？
- 确认必要性：这个问题是否必须通过基因吸收解决？
- 宪法检查：是否符合≤200行、协议驱动等底线？

### 步骤2：协议执行
- **L2协议**：简单基因（≤150行，功能增强）
- **L3协议**：复杂基因（≤200行，架构变更）
- **必须包含**：风险评估、回滚方案、测试计划

### 步骤3：实现验证
1. **重新实现**：基于基因设计思想，用新代码实现（≤200行）
2. **独立测试**：在沙箱中验证功能
3. **逐步集成**：小范围测试后逐步集成到主系统
4. **宪法审查**：对照宪法1-5条逐项检查
5. **记录归档**：更新基因吸收状态记录

## 📁 基因文件管理

### 文件位置
```
02_锚点核心库/优秀基因/
├── 熔断器基因.md          # 已吸收基因示例
├── [其他基因].md         # 需要时才创建
└── 基因吸收记录.json     # 记录吸收历史
```

### 文件创建原则
- **需要时才创建**：不预先创建所有基因文档
- **一页纸设计**：每个基因文档≤2页，重点说清楚核心设计
- **实用导向**：只包含实现所需的关键信息

## ⚠️ 重要警示

### 禁止行为（违宪）
- ❌ 基因模块超过200行代码
- ❌ 不通过协议直接吸收
- ❌ 复制代码（相似度>30%）
- ❌ 影响系统稳定性的高风险吸收
- ❌ 不执行宪法审查

### 生存优先原则
1. **稳定第一**：任何基因吸收都不能让系统更不稳定
2. **回滚保障**：必须有完整的回滚方案
3. **测试先行**：必须经过充分测试才能集成
4. **逐步推进**：小步快跑，不要一次性吸收复杂基因

## 🔧 当前可用的基因

### 已吸收基因
1. **熔断器基因** (`熔断器基因.md`)
   - 适用场景：API频繁失败、服务降级
   - 状态：✅ 已吸收（设计文档完整）
   - 宪法合规：≤150行，通过L2协议

### 待吸收基因（需要时创建）
1. **Pydantic配置基因** 
   - 触发症状：配置管理混乱
   - 预计行数：≤180行
   - 协议级别：L2

2. **意图识别基因**
   - 触发症状：用户意图理解困难（阶段三核心）
   - 预计行数：≤200行  
   - 协议级别：L3

3. **工作记忆基因**
   - 触发症状：记不住用户习惯和偏好
   - 预计行数：≤150行
   - 协议级别：L2

## 📝 使用示例

### 案例：遇到API频繁失败
1. **识别症状**：API调用失败率>20%
2. **查找基因**：查看`02_锚点核心库/优秀基因/熔断器基因.md`
3. **协议申请**：申请L2操作协议，提交风险评估
4. **重新实现**：基于设计文档，用新代码实现熔断器（≤150行）
5. **测试验证**：在独立模块中测试熔断功能
6. **逐步集成**：先在小范围API调用中使用
7. **宪法审查**：检查是否符合宪法1-5条
8. **记录归档**：更新基因吸收记录

## 🚀 阶段三基因吸收建议

### 优先顺序
1. **意图识别基因**（阶段三核心能力）
2. **多AI提供商支持**（如需多智能体协作）
3. **语义关联增强**（如需深化记忆系统）

### 实施原则
- **一次一个**：不要同时吸收多个基因
- **充分测试**：每个基因都要独立验证
- **宪法优先**：每次吸收前先问"是否符合宪法？"

---

**版本**：v1.0（极简版）  
**生成时间**：2026-02-06  
**设计理念**：简单实用，生存优先，宪法底线，需要才用